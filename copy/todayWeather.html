<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë‚ ì”¨ ì•±</title>
    <link rel="icon" href="./image/bimoicon.png" />
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: #e0f7fa;
      }
      .weather-container {
        text-align: center;
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }
      .weather-icon {
        font-size: 48px;
      }
      .temperature {
        font-size: 32px;
        margin: 10px 0;
      }
      .description {
        font-size: 24px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <div class="weather-container">
      <div id="weather-icon" class="weather-icon">â˜€ï¸</div>
      <div id="temperature" class="temperature">--Â°C</div>
      <div id="description" class="description">ë¡œë”© ì¤‘...</div>
    </div>

    <script>
      const API_KEY = "2496a945d5aba6b1ae5b53ddecb57bcd";

      function getWeatherIcon(weatherId) {
        if (weatherId >= 200 && weatherId < 300) return "â›ˆï¸"; // ì²œë‘¥ë²ˆê°œ
        if (weatherId >= 300 && weatherId < 500) return "ğŸŒ§ï¸"; // ì´ìŠ¬ë¹„
        if (weatherId >= 500 && weatherId < 600) return "ğŸŒ§ï¸"; // ë¹„
        if (weatherId >= 600 && weatherId < 700) return "â„ï¸"; // ëˆˆ
        if (weatherId >= 700 && weatherId < 800) return "ğŸŒ«ï¸"; // ì•ˆê°œ
        if (weatherId === 800) return "â˜€ï¸"; // ë§‘ìŒ
        if (weatherId > 800) return "â˜ï¸"; // êµ¬ë¦„
        return "ğŸŒ¡ï¸"; // ê¸°ë³¸ ë‚ ì”¨ ì•„ì´ì½˜
      }

      function getWeather(lat, lon) {
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=kr`;

        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            const temperature = data.main.temp;
            const weatherId = data.weather[0].id;
            const description = data.weather[0].description;

            document.getElementById(
              "temperature"
            ).textContent = `${temperature}Â°C`;
            document.getElementById("weather-icon").textContent =
              getWeatherIcon(weatherId);
            document.getElementById("description").textContent = description;
          })
          .catch((error) => {
            console.error("ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
            document.getElementById("description").textContent =
              "ë‚ ì”¨ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
          });
      }

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (position) => {
              const lat = position.coords.latitude;
              const lon = position.coords.longitude;
              getWeather(lat, lon);
            },
            (error) => {
              console.error("ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
              document.getElementById("description").textContent =
                "ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
            }
          );
        } else {
          document.getElementById("description").textContent =
            "ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
        }
      }

      window.onload = getLocation;
    </script>
  </body>
</html>
